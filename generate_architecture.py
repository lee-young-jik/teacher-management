import requests
import json
import base64
import os
from datetime import datetime

# OpenRouter API ì„¤ì •
OPENROUTER_API_KEY = os.environ.get("OPENROUTER_API_KEY", "YOUR_API_KEY_HERE")

def generate_architecture_diagram():
    """
    ê°€ìƒ ì•„í‹°ìŠ¤íŠ¸-ê´€ê° ìƒí˜¸ì‘ìš© ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ìƒì„±
    """
    
    # ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•œ ìƒì„¸ í”„ë¡¬í”„íŠ¸
    prompt = """
    Create a professional system architecture diagram for "Virtual Artist-Audience Interaction System" with the following components:

    TOP SECTION - INPUT LAYER:
    - Camera icon with "Video Stream" label
    - Microphone icon with "Audio Stream" label
    - Both connected to center

    MIDDLE SECTION - PROCESSING CORE:
    1. LEFT BOX: "Video Encoder" (Transformer-based, LoRA tuning)
    2. RIGHT BOX: "Audio Encoder" (Transformer-based, LoRA tuning)
    3. CENTER: "Multimodal Fusion Module" connecting both encoders
    
    BELOW PROCESSING:
    - "Audience Reaction Classifier" box showing:
      * Cheering, Applause, Booing, Questions, Silence (10+ types)
      * Intensity Level (Low/Medium/High)
      * Engagement Score
    
    METADATA LAYER:
    - "Reaction Metadata DB" connected to classifier
    - Shows: Action candidates, Transition rules, Priority weights
    
    OUTPUT SECTION:
    - "Virtual Artist Response Generator" 
    - Outputs: Behavior, Expression, Movement
    - "VAII Score Calculator" (showing metrics)
    
    BOTTOM:
    - "Virtual Artist Avatar" with feedback loop back to audience
    
    Style: Clean, modern, tech diagram with blue/purple gradient theme
    Performance metrics displayed: 90% accuracy, <500ms latency
    Use icons and clear connection arrows
    Professional presentation quality
    """

    # OpenRouter API í˜¸ì¶œ (ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ ì‚¬ìš©)
    headers = {
        "Authorization": f"Bearer {OPENROUTER_API_KEY}",
        "Content-Type": "application/json",
        "HTTP-Referer": "http://localhost",
        "X-Title": "Architecture Generator"
    }
    
    # DALL-E 3 ë˜ëŠ” ë‹¤ë¥¸ ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ ì‚¬ìš©
    payload = {
        "model": "openai/dall-e-3",
        "prompt": prompt,
        "n": 1,
        "size": "1792x1024",
        "quality": "hd",
        "style": "vivid"
    }
    
    try:
        response = requests.post(
            "https://openrouter.ai/api/v1/images/generations",
            headers=headers,
            json=payload,
            timeout=120
        )
        
        if response.status_code == 200:
            result = response.json()
            print("ì´ë¯¸ì§€ ìƒì„± ì„±ê³µ!")
            print(json.dumps(result, indent=2, ensure_ascii=False))
            
            # ì´ë¯¸ì§€ URL ë˜ëŠ” base64 ë°ì´í„° ì €ì¥
            if "data" in result and len(result["data"]) > 0:
                image_data = result["data"][0]
                if "url" in image_data:
                    print(f"\nì´ë¯¸ì§€ URL: {image_data['url']}")
                elif "b64_json" in image_data:
                    # Base64 ì´ë¯¸ì§€ë¥¼ íŒŒì¼ë¡œ ì €ì¥
                    img_bytes = base64.b64decode(image_data["b64_json"])
                    filename = f"architecture_diagram_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png"
                    filepath = f"/Users/aglyj0225/Desktop/LYJ/teacher/{filename}"
                    with open(filepath, "wb") as f:
                        f.write(img_bytes)
                    print(f"\nì´ë¯¸ì§€ ì €ì¥ë¨: {filepath}")
            return result
        else:
            print(f"API ì˜¤ë¥˜: {response.status_code}")
            print(response.text)
            return None
            
    except Exception as e:
        print(f"ì˜¤ë¥˜ ë°œìƒ: {e}")
        return None


def create_mermaid_diagram():
    """
    Mermaid.js í˜•ì‹ì˜ ë‹¤ì´ì–´ê·¸ë¨ ì½”ë“œ ìƒì„± (ëŒ€ì•ˆ)
    """
    
    mermaid_code = """
```mermaid
flowchart TB
    subgraph INPUT["ğŸ“¥ ì…ë ¥ ê³„ì¸µ"]
        CAM["ğŸ¥ Video Stream"]
        MIC["ğŸ¤ Audio Stream"]
    end

    subgraph ENCODER["ğŸ”„ ë©€í‹°ëª¨ë‹¬ ì¸ì½”ë”"]
        VE["Video Encoder<br/>Transformer + LoRA"]
        AE["Audio Encoder<br/>Transformer + LoRA"]
        FUSION["âš¡ Multimodal<br/>Fusion Module"]
    end

    subgraph CLASSIFIER["ğŸ¯ ê´€ê° ë°˜ì‘ ë¶„ë¥˜ê¸°"]
        RC["Reaction Classifier<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>í™˜í˜¸ | ë°•ìˆ˜ | ì•¼ìœ <br/>ì§ˆë¬¸ | ì¹¨ë¬µ | ì›ƒìŒ<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ê°•ë„: Low/Mid/High<br/>ëª°ì…ë„: 0-100%"]
    end

    subgraph METADATA["ğŸ“Š ë©”íƒ€ë°ì´í„° ì‹œìŠ¤í…œ"]
        MDB[("Reaction<br/>Metadata DB")]
        RULES["í–‰ë™ í›„ë³´êµ°<br/>ì „ì´ ì¡°ê±´<br/>ìš°ì„ ìˆœìœ„ ê·œì¹™"]
    end

    subgraph RESPONSE["ğŸ¤– ê°€ìƒ ì•„í‹°ìŠ¤íŠ¸ ë°˜ì‘ ìƒì„±"]
        RG["Response Generator"]
        VAII["VAII Calculator<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ ë°˜ì‘ ì í•©ì„±<br/>â€¢ ì§€ì—° ì‹œê°„ <500ms<br/>â€¢ ìƒí˜¸ì‘ìš© ì—°ì†ì„±<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>ëª©í‘œ: ì •í™•ë„ 90%â†‘"]
    end

    subgraph OUTPUT["ğŸ­ ì¶œë ¥"]
        VA["Virtual Artist<br/>Avatar"]
        BEM["í–‰ë™ | í‘œì • | ë™ì‘"]
    end

    CAM --> VE
    MIC --> AE
    VE --> FUSION
    AE --> FUSION
    FUSION --> RC
    RC --> MDB
    MDB --> RULES
    RULES --> RG
    RC --> VAII
    RG --> VA
    VAII --> VA
    VA --> BEM
    BEM -.->|í”¼ë“œë°±| INPUT

    style INPUT fill:#e3f2fd,stroke:#1976d2
    style ENCODER fill:#f3e5f5,stroke:#7b1fa2
    style CLASSIFIER fill:#fff3e0,stroke:#f57c00
    style METADATA fill:#e8f5e9,stroke:#388e3c
    style RESPONSE fill:#fce4ec,stroke:#c2185b
    style OUTPUT fill:#e0f7fa,stroke:#0097a7
```
"""
    return mermaid_code


def create_ascii_diagram():
    """
    ASCII ì•„íŠ¸ í˜•ì‹ì˜ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨
    """
    
    diagram = """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ­ ê°€ìƒ ì•„í‹°ìŠ¤íŠ¸-ê´€ê° ìƒí˜¸ì‘ìš© ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜                          â•‘
â•‘                    Virtual Artist-Audience Interaction System                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì…ë ¥ ê³„ì¸µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                       â”‚
â”‚         ğŸ¥ Video Stream                              ğŸ¤ Audio Stream                  â”‚
â”‚              â”‚                                            â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                            â”‚
               â–¼                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë©€í‹°ëª¨ë‹¬ ì¸ì½”ë” ê³„ì¸µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚    Video Encoder        â”‚              â”‚    Audio Encoder        â”‚                 â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚              â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚                 â”‚
â”‚  â”‚  â€¢ Transformer ê¸°ë°˜     â”‚              â”‚  â€¢ Transformer ê¸°ë°˜     â”‚                 â”‚
â”‚  â”‚  â€¢ LoRA Fine-tuning    â”‚              â”‚  â€¢ LoRA Fine-tuning    â”‚                 â”‚
â”‚  â”‚  â€¢ ì˜ìƒ íŠ¹ì§• ì¶”ì¶œ       â”‚              â”‚  â€¢ ìŒí–¥ íŠ¹ì§• ì¶”ì¶œ       â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚              â”‚                                        â”‚                               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                             â–¼                                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚              â”‚   âš¡ Multimodal Fusion       â”‚                                         â”‚
â”‚              â”‚   â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚                                         â”‚
â”‚              â”‚   â€¢ ê°€ì¤‘ì¹˜ ê¸°ë°˜ ê²°í•©          â”‚                                         â”‚
â”‚              â”‚   â€¢ ëª¨ë‹¬ ë³´ì™„ ì²˜ë¦¬            â”‚                                         â”‚
â”‚              â”‚   â€¢ ì‹¤ì‹œê°„ ì²˜ë¦¬ ìµœì í™”        â”‚                                         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ê´€ê° ë°˜ì‘ ë¶„ë¥˜ ê³„ì¸µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        ğŸ¯ Audience Reaction Classifier                         â”‚   â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚   â”‚
â”‚  â”‚                                                                                â”‚   â”‚
â”‚  â”‚   ë°˜ì‘ ìœ í˜• (10ì¢…+)                           ë°˜ì‘ ê°•ë„                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚  â”‚ í™˜í˜¸ â”‚ ë°•ìˆ˜ â”‚ ì•¼ìœ  â”‚ ì§ˆë¬¸ â”‚ ì¹¨ë¬µ â”‚      â”‚ â—‹ Low (0-33%)   â”‚                â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤      â”‚ â— Mid (34-66%)  â”‚                â”‚   â”‚
â”‚  â”‚  â”‚ ì›ƒìŒ â”‚ íƒ„ì„± â”‚ íœ˜íŒŒëŒâ”‚ ê¸°ë¦½ â”‚ í‡´ì¥ â”‚      â”‚ â— High (67-100%)â”‚                â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â”‚                                                                                â”‚   â”‚
â”‚  â”‚   ğŸ“Š ëª°ì…ë„ ì§€ìˆ˜: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%        â±ï¸ ì²˜ë¦¬ ì§€ì—°: <500ms                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ Metadata DB   â”‚  â”‚  ğŸ“‹ í–‰ë™ ê·œì¹™ ì—”ì§„       â”‚  â”‚  ğŸ“ˆ VAII Calculator    â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚  â€¢ ë°˜ì‘-í–‰ë™ ë§¤í•‘  â”‚  â”‚  â€¢ í–‰ë™ í›„ë³´êµ°          â”‚  â”‚  â€¢ ë°˜ì‘ ì í•©ì„± ì ìˆ˜    â”‚
â”‚  â€¢ í‘œì • ë¼ì´ë¸ŒëŸ¬ë¦¬ â”‚  â”‚  â€¢ ì „ì´ ì¡°ê±´ ê·œì¹™       â”‚  â”‚  â€¢ ì§€ì—° ì‹œê°„ ì ìˆ˜      â”‚
â”‚  â€¢ ë™ì‘ ì‹œí€€ìŠ¤    â”‚  â”‚  â€¢ ìš°ì„ ìˆœìœ„ ê°€ì¤‘ì¹˜      â”‚  â”‚  â€¢ ì—°ì†ì„± ì ìˆ˜         â”‚
â”‚  â€¢ ìƒí™©ë³„ ì œì•½    â”‚  â”‚  â€¢ ì œì•½ ê·œì¹™ ì²˜ë¦¬       â”‚  â”‚  â€¢ ì¢…í•© VAII ì ìˆ˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚                            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°˜ì‘ ìƒì„± ê³„ì¸µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚              â”‚        ğŸ¤– Virtual Artist Response Generator       â”‚                       â”‚
â”‚              â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚                       â”‚
â”‚              â”‚                                                   â”‚                       â”‚
â”‚              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                       â”‚
â”‚              â”‚   â”‚  í–‰ë™   â”‚   â”‚  í‘œì •   â”‚   â”‚  ë™ì‘   â”‚        â”‚                       â”‚
â”‚              â”‚   â”‚ Behaviorâ”‚   â”‚Expressionâ”‚   â”‚Movement â”‚        â”‚                       â”‚
â”‚              â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚                       â”‚
â”‚              â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ì¶œë ¥ ê³„ì¸µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                    â”‚     ğŸ­ Virtual Artist Avatar       â”‚                                â”‚
â”‚                    â”‚    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”    â”‚                                â”‚
â”‚                    â”‚                                    â”‚                                â”‚
â”‚                    â”‚         â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®           â”‚                                â”‚
â”‚                    â”‚         â”‚   (â—•â€¿â—•)    â”‚           â”‚                                â”‚
â”‚                    â”‚         â”‚    â”Œâ”€â”      â”‚           â”‚                                â”‚
â”‚                    â”‚         â”‚   /â”‚ â”‚\\     â”‚           â”‚                                â”‚
â”‚                    â”‚         â”‚    â”‚ â”‚      â”‚           â”‚                                â”‚
â”‚                    â”‚         â”‚   / \\ / \\    â”‚           â”‚                                â”‚
â”‚                    â”‚         â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯           â”‚                                â”‚
â”‚                    â”‚                                    â”‚                                â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   ğŸª ê³µì—° ë¬´ëŒ€       â”‚
                           â”‚   â†º í”¼ë“œë°± ë£¨í”„     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
                                                                                       â”‚
                                      â–²                                                â”‚
                                      â”‚                                                â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
                           â”‚   ğŸ‘¥ ê´€ê° (Audience) â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                  ğŸ“Š í•µì‹¬ ì„±ëŠ¥ ëª©í‘œ                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âœ“ ê´€ê° ë°˜ì‘ ë¶„ë¥˜ ì •í™•ë„: 90% ì´ìƒ                                                    â•‘
â•‘  âœ“ ë°˜ì‘-í–‰ë™ ë§¤í•‘ ì •í™•ë„: 90% ì´ìƒ                                                    â•‘
â•‘  âœ“ ì‹¤ì‹œê°„ ì¶”ë¡  ì§€ì—°: 500ms ì´í•˜                                                       â•‘
â•‘  âœ“ VAII ìƒìœ„ êµ¬ê°„ ë§Œì¡±ë„: 90% ì´ìƒ                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""
    return diagram


if __name__ == "__main__":
    print("=" * 80)
    print("ê°€ìƒ ì•„í‹°ìŠ¤íŠ¸-ê´€ê° ìƒí˜¸ì‘ìš© ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ìƒì„±ê¸°")
    print("=" * 80)
    
    # ASCII ë‹¤ì´ì–´ê·¸ë¨ ì¶œë ¥ ë° ì €ì¥
    ascii_diagram = create_ascii_diagram()
    print(ascii_diagram)
    
    # íŒŒì¼ë¡œ ì €ì¥
    with open("/Users/aglyj0225/Desktop/LYJ/teacher/system_architecture_diagram.txt", "w", encoding="utf-8") as f:
        f.write(ascii_diagram)
    print("\nâœ… ASCII ë‹¤ì´ì–´ê·¸ë¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: system_architecture_diagram.txt")
    
    # Mermaid ì½”ë“œ ì €ì¥
    mermaid_code = create_mermaid_diagram()
    with open("/Users/aglyj0225/Desktop/LYJ/teacher/system_architecture_mermaid.md", "w", encoding="utf-8") as f:
        f.write("# ê°€ìƒ ì•„í‹°ìŠ¤íŠ¸-ê´€ê° ìƒí˜¸ì‘ìš© ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜\n\n")
        f.write(mermaid_code)
    print("âœ… Mermaid ë‹¤ì´ì–´ê·¸ë¨ ì½”ë“œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: system_architecture_mermaid.md")
    
    # OpenRouter API í‚¤ê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì´ë¯¸ì§€ ìƒì„± ì‹œë„
    if OPENROUTER_API_KEY != "YOUR_API_KEY_HERE":
        print("\nì´ë¯¸ì§€ ìƒì„± ì¤‘...")
        generate_architecture_diagram()
    else:
        print("\nâš ï¸ OpenRouter API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.")
        print("   ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•´ í™˜ê²½ë³€ìˆ˜ OPENROUTER_API_KEYë¥¼ ì„¤ì •í•˜ê±°ë‚˜")
        print("   ìŠ¤í¬ë¦½íŠ¸ì˜ API í‚¤ë¥¼ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.")
